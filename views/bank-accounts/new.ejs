<% layout('layouts/boilerplate.ejs') %>

<div class="container mt-4 mb-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-header">
          <h4 class="mb-0">
            <i class="fas fa-university"></i> Add Bank Account
          </h4>
        </div>
        <div class="card-body">
          <form
            action="/bank-accounts"
            method="POST"
            novalidate
            class="needs-validation"
          >
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="accountHolderName" class="form-label"
                  >Account Holder Name</label
                >
                <input
                  type="text"
                  name="bankAccount[accountHolderName]"
                  id="accountHolderName"
                  class="form-control"
                  placeholder="Enter account holder name"
                  required
                />
                <div class="invalid-feedback">
                  Please enter account holder name.
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="accountNumber" class="form-label"
                  >Account Number</label
                >
                <input
                  type="text"
                  name="bankAccount[accountNumber]"
                  id="accountNumber"
                  class="form-control"
                  placeholder="Enter account number"
                  required
                />
                <div class="invalid-feedback">Please enter account number.</div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="ifscCode" class="form-label">IFSC Code</label>
                <input
                  type="text"
                  name="bankAccount[ifscCode]"
                  id="ifscCode"
                  class="form-control"
                  placeholder="Enter IFSC code"
                  required
                />
                <div class="invalid-feedback">Please enter IFSC code.</div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="bankName" class="form-label">Bank Name</label>
                <select
                  name="bankAccount[bankName]"
                  id="bankName"
                  class="form-control"
                  required
                >
                  <option value="">Select bank name</option>
                  <option value="State Bank of India (SBI)">State Bank of India (SBI)</option>
                  <option value="HDFC Bank">HDFC Bank</option>
                  <option value="ICICI Bank">ICICI Bank</option>
                  <option value="Axis Bank">Axis Bank</option>
                  <option value="Kotak Mahindra Bank">Kotak Mahindra Bank</option>
                  <option value="Punjab National Bank (PNB)">Punjab National Bank (PNB)</option>
                  <option value="Bank of Baroda">Bank of Baroda</option>
                  <option value="Canara Bank">Canara Bank</option>
                  <option value="Union Bank of India">Union Bank of India</option>
                  <option value="IndusInd Bank">IndusInd Bank</option>
                  <option value="Yes Bank">Yes Bank</option>
                  <option value="Federal Bank">Federal Bank</option>
                  <option value="IDBI Bank">IDBI Bank</option>
                  <option value="Bank of India">Bank of India</option>
                  <option value="Central Bank of India">Central Bank of India</option>
                  <option value="Indian Bank">Indian Bank</option>
                  <option value="Indian Overseas Bank">Indian Overseas Bank</option>
                  <option value="UCO Bank">UCO Bank</option>
                  <option value="Punjab & Sind Bank">Punjab & Sind Bank</option>
                  <option value="Bank of Maharashtra">Bank of Maharashtra</option>
                </select>
                <div class="invalid-feedback">Please select bank name.</div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="branchName" class="form-label"
                  >Branch Name (Optional)</label
                >
                <input
                  type="text"
                  name="bankAccount[branchName]"
                  id="branchName"
                  class="form-control"
                  placeholder="Enter branch name"
                />
              </div>

              <div class="col-md-6 mb-3">
                <label for="accountType" class="form-label">Account Type</label>
                <select
                  name="bankAccount[accountType]"
                  id="accountType"
                  class="form-control"
                  required
                >
                  <option value="">Select account type</option>
                  <option value="savings">Savings Account</option>
                  <option value="current">Current Account</option>
                </select>
                <div class="invalid-feedback">Please select account type.</div>
              </div>
            </div>

            <div class="alert alert-info">
              <i class="fas fa-info-circle"></i>
              <strong>Important:</strong> This bank account will be used to
              receive payments for your property bookings. Please ensure all
              details are correct.
            </div>

            <div class="row g-2">
              <div class="col-md-6">
                <button type="submit" class="btn btn-primary w-100">
                  <i class="fas fa-save"></i> Add Bank Account
                </button>
              </div>
              <div class="col-md-6">
                <a href="/bank-accounts" class="btn btn-outline-secondary w-100">
                  <i class="fas fa-arrow-left"></i> Back to Bank Accounts
                </a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Client-side validation
  (() => {
    "use strict";
    const forms = document.querySelectorAll(".needs-validation");
    Array.from(forms).forEach((form) => {
      form.addEventListener(
        "submit",
        (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        },
        false
      );
    });
  })();

  // Format IFSC code
  document.getElementById("ifscCode").addEventListener("input", function (e) {
    e.target.value = e.target.value.toUpperCase();
  });

  // Format account number
  document
    .getElementById("accountNumber")
    .addEventListener("input", function (e) {
      e.target.value = e.target.value.replace(/[^0-9]/g, "");
    });
</script>
